SELECT members.* FROM (SELECT DISTINCT ON (user_id) member_union.* FROM (SELECT members.* FROM members WHERE members.source_type = 'Project' AND members.type IN ('ProjectMember') AND members.source_id = 13083 AND members.source_type = 'Project' AND members.type IN ('ProjectMember') AND members.requested_at IS NULL AND members.invite_token IS NULL UNION ALL SELECT members.* FROM members WHERE members.source_type = 'Namespace' AND members.type IN ('GroupMember') AND members.source_id = 9970 AND members.source_type = 'Namespace' AND members.type IN ('GroupMember') AND members.requested_at IS NULL AND members.invite_token IS NULL) AS member_union ORDER BY user_id, CASE WHEN type = 'ProjectMember' THEN 1 WHEN type = 'GroupMember' THEN 2 ELSE 3 END) AS members LEFT JOIN users ON members.user_id = users.id ORDER BY users.name ASC NULLS LAST LIMIT 20 OFFSET 0;
